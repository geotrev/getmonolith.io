{"version":3,"file":"undernet.js","sources":["../../lib/esm/helpers/utils.js","../../lib/esm/collapsible/constants.js","../../lib/esm/collapsible/collapsible.js","../../lib/esm/accordion/constants.js","../../lib/esm/accordion/accordion.js","../../lib/esm/dropdown/constants.js","../../lib/esm/dropdown/dropdown.js","../../lib/esm/modal/constants.js","../../lib/esm/modal/modal.js","../../lib/esm/tooltip/constants.js","../../lib/esm/tooltip/tooltip.js","../../lib/esm/index.js","../../_scripts/undernet.js"],"sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nvar KeyCodes = {\n  SHIFT: 16,\n  TAB: 9,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40\n};\nvar Selectors = {\n  FOCUSABLE_TAGS: [\"a\", \"button\", \"input\", \"object\", \"select\", \"textarea\", \"[tabindex]\"],\n  KEYBOARD_CLASS: \"using-keyboard\",\n  NOT_VISUALLY_HIDDEN_CLASS: \":not(.is-visually-hidden)\",\n  TABINDEX: \"tabindex\"\n};\nvar Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  BLUR: \"blur\"\n};\nvar Messages = {\n  NO_SELECTOR_STRING_OR_CHILDREN_ERROR: \"createFocusTrap must be given one or both of: first parameter (as selector string) and/or options.children (array of elements).\",\n  OPTION_MATCHERS_DATA_TYPE_ERROR: \"Invalid data type given to options.matchers for createFocusTrap. Expected: Array.\",\n  INCORRECT_MATCHER_TYPE_ERROR: function INCORRECT_MATCHER_TYPE_ERROR(type) {\n    return \"Invalid matcher given to options.matchers for createFocusTrap. Expected: String. Recieved: \".concat(type, \".\");\n  },\n  NO_MATCHER_LENGTH_ERROR: \"Invalid value given to options.matchers for createFocusTrap; value must be an array with at least one selector string\",\n  NO_PARENT_FOUND_IN_SCOPE: function NO_PARENT_FOUND_IN_SCOPE(id) {\n    return \"Element couldn't be found with selector string: '\".concat(id, \"'\");\n  },\n  DUPLICATE_SCOPE_ERROR: function DUPLICATE_SCOPE_ERROR(id) {\n    return \"You tried to start an Undernet component with scope '\".concat(id, \"', but that scope is already active.\\n\\nYou must call COMPONENT_NAME.stop(scopeSelector) first, then.\");\n  }\n};\nexport var log = function log(message) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"error\";\n  return console[type](message);\n};\nexport var isBrowserEnv = typeof window !== \"undefined\";\nexport var dom = {\n  getAttr: function getAttr(element, attr) {\n    return element.getAttribute(attr);\n  },\n  setAttr: function setAttr(element, attr, value) {\n    element.setAttribute(attr, value);\n  },\n  removeAttr: function removeAttr(element, attr) {\n    element.removeAttribute(attr);\n  },\n  hasAttr: function hasAttr(element, attr) {\n    return element.hasAttribute(attr);\n  },\n  find: function find(selector) {\n    var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n    return parent.querySelector(selector);\n  },\n  findAll: function findAll(selector) {\n    var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n    return _toConsumableArray(parent.querySelectorAll(selector));\n  },\n  setStyle: function setStyle(element, property, value) {\n    element.style[property] = value;\n  },\n  getStyle: function getStyle(element, property) {\n    return element.style[property];\n  },\n  addClass: function addClass(element) {\n    var _element$classList;\n\n    for (var _len = arguments.length, classes = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      classes[_key - 1] = arguments[_key];\n    }\n\n    (_element$classList = element.classList).add.apply(_element$classList, classes);\n  },\n  removeClass: function removeClass(element) {\n    var _element$classList2;\n\n    for (var _len2 = arguments.length, classes = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      classes[_key2 - 1] = arguments[_key2];\n    }\n\n    (_element$classList2 = element.classList).remove.apply(_element$classList2, classes);\n  },\n  hasClass: function hasClass(element) {\n    for (var _len3 = arguments.length, classes = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      classes[_key3 - 1] = arguments[_key3];\n    }\n\n    return classes.filter(function (givenClassName) {\n      return element.classList.contains(givenClassName);\n    }).length > 0;\n  }\n};\nexport var getFocusableElements = function getFocusableElements(selectorString) {\n  var matchers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Selectors.FOCUSABLE_TAGS;\n  var focusables = matchers.map(function (selector) {\n    return \"\".concat(selectorString, \" \").concat(selector).concat(Selectors.NOT_VISUALLY_HIDDEN_CLASS);\n  }).join(\", \");\n  return dom.findAll(focusables);\n};\nexport var iOSMobile = isBrowserEnv ? /(iphone|ipod|ipad)/i.test(navigator.userAgent) : false;\nexport var createFocusTrap = function createFocusTrap(selectorString) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!isBrowserEnv) return;\n  var useArrows = options.useArrows,\n      children = options.children,\n      _options$matchers = options.matchers,\n      matchers = _options$matchers === void 0 ? Selectors.FOCUSABLE_TAGS : _options$matchers;\n\n  if (!selectorString && !children.length) {\n    log(Messages.NO_SELECTOR_STRING_OR_CHILDREN_ERROR);\n    return;\n  }\n\n  if (!Array.isArray(matchers)) {\n    log(Messages.OPTION_MATCHERS_DATA_TYPE_ERROR);\n    return;\n  } else if (matchers.length) {\n    var hasBadMatcher = false;\n    matchers.forEach(function (matcher) {\n      var type = _typeof(matcher);\n\n      if (type !== \"string\") {\n        log(Messages.INCORRECT_MATCHER_TYPE_ERROR(type));\n        hasBadMatcher = true;\n      }\n    });\n    if (hasBadMatcher) return;\n  } else if (!matchers.length) {\n    log(Messages.NO_MATCHER_LENGTH_ERROR);\n    return;\n  }\n\n  var focusableChildren = children && children.length ? children : getFocusableElements(selectorString, matchers);\n  var focusableFirstChild = focusableChildren[0];\n  var focusableLastChild = focusableChildren[focusableChildren.length - 1];\n\n  var handleFocusTrapWithTab = function handleFocusTrapWithTab(event) {\n    var containerElement = dom.find(selectorString);\n    var containerActive = document.activeElement === containerElement;\n    var firstActive = document.activeElement === focusableFirstChild;\n    var lastActive = document.activeElement === focusableLastChild;\n    if (!containerActive && !firstActive && !lastActive) return;\n    var tabKey = event.which === KeyCodes.TAB;\n    var shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey;\n    var hasShift = shiftKey && tabKey;\n    var noShift = !shiftKey && tabKey;\n\n    if (hasShift && (firstActive || containerActive)) {\n      event.preventDefault();\n      focusableLastChild.focus();\n    } else if (noShift && lastActive) {\n      event.preventDefault();\n      focusableFirstChild.focus();\n    }\n  };\n\n  var focusNextChild = function focusNextChild() {\n    for (var i = 0; i < focusableChildren.length; i++) {\n      if (focusableChildren[i] === document.activeElement) {\n        focusableChildren[i + 1].focus();\n        break;\n      }\n    }\n  };\n\n  var focusLastChild = function focusLastChild() {\n    for (var i = 0; i < focusableChildren.length; i++) {\n      if (focusableChildren[i] === document.activeElement) {\n        focusableChildren[i - 1].focus();\n        break;\n      }\n    }\n  };\n\n  var handleFocusTrapWithArrows = function handleFocusTrapWithArrows(event) {\n    var firstActive = document.activeElement === focusableFirstChild;\n    var lastActive = document.activeElement === focusableLastChild;\n    var arrowUp = event.which === KeyCodes.ARROW_UP;\n    var arrowDown = event.which === KeyCodes.ARROW_DOWN;\n\n    if (arrowUp || arrowDown) {\n      event.preventDefault();\n\n      if (firstActive && arrowUp) {\n        focusableLastChild.focus();\n      } else if (lastActive && arrowDown) {\n        focusableFirstChild.focus();\n      } else if (arrowDown) {\n        focusNextChild();\n      } else if (arrowUp) {\n        focusLastChild();\n      }\n    }\n  };\n\n  return {\n    start: function start() {\n      if (useArrows) {\n        document.addEventListener(Events.KEYDOWN, handleFocusTrapWithArrows);\n      } else {\n        document.addEventListener(Events.KEYDOWN, handleFocusTrapWithTab);\n      }\n    },\n    stop: function stop() {\n      if (useArrows) {\n        document.removeEventListener(Events.KEYDOWN, handleFocusTrapWithArrows);\n      } else {\n        document.removeEventListener(Events.KEYDOWN, handleFocusTrapWithTab);\n      }\n    }\n  };\n};\nexport var createFocusRing = function createFocusRing() {\n  if (!isBrowserEnv) return;\n  var listeningForKeydown;\n\n  var listenForKeyboard = function listenForKeyboard() {\n    document.body.classList.add(Selectors.KEYBOARD_CLASS);\n    document.removeEventListener(Events.KEYDOWN, listenForKeyboard);\n    document.addEventListener(Events.CLICK, listenForClick);\n    listeningForKeydown = false;\n  };\n\n  var listenForClick = function listenForClick() {\n    document.body.classList.remove(Selectors.KEYBOARD_CLASS);\n    document.removeEventListener(Events.CLICK, listenForClick);\n    document.addEventListener(Events.KEYDOWN, listenForKeyboard);\n    listeningForKeydown = true;\n  };\n\n  return {\n    start: function start() {\n      document.addEventListener(Events.KEYDOWN, listenForKeyboard);\n    },\n    stop: function stop() {\n      if (listeningForKeydown) {\n        document.removeEventListener(Events.KEYDOWN, listenForKeyboard);\n      } else {\n        document.body.classList.remove(Selectors.KEYBOARD_CLASS);\n        document.removeEventListener(Events.CLICK, listenForClick);\n      }\n    }\n  };\n};\nexport var getPageBaseFontSize = function getPageBaseFontSize() {\n  if (!isBrowserEnv) return;\n  var BODY_TAG = \"body\";\n  var FONT_SIZE_PROPERTY = \"font-size\";\n  var PX_SUBSTRING = \"px\";\n  var FONT_SIZE_VALUE_FALLBACK = 16;\n  var body = dom.find(BODY_TAG);\n  var computedFontSize = window.getComputedStyle(body).getPropertyValue(FONT_SIZE_PROPERTY);\n  var bodySize = FONT_SIZE_VALUE_FALLBACK;\n\n  if (computedFontSize) {\n    var indexOfPx = computedFontSize.indexOf(PX_SUBSTRING);\n    bodySize = parseFloat(computedFontSize.slice(0, indexOfPx));\n  }\n\n  return bodySize;\n};\nexport var focusOnce = function focusOnce(element) {\n  var handleBlur = function handleBlur(_ref) {\n    var target = _ref.target;\n    dom.removeAttr(target, Selectors.TABINDEX);\n    target.removeEventListener(Events.BLUR, handleBlur);\n  };\n\n  dom.setAttr(element, Selectors.TABINDEX, \"-1\");\n  element.focus();\n  element.addEventListener(Events.BLUR, handleBlur);\n};\n\nvar filterByAttrValue = function filterByAttrValue(elements, attribute, error) {\n  return elements.filter(function (element) {\n    var value = dom.getAttr(element, attribute);\n\n    if (!value) {\n      log(error);\n      return false;\n    }\n\n    return true;\n  });\n};\n\nvar assignScope = function assignScope() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var thisArg = options.thisArg,\n      scopeId = options.scopeId,\n      scopeKey = options.scopeKey,\n      componentAttribute = options.componentAttribute,\n      globalKey = options.globalKey,\n      errorMessage = options.errorMessage,\n      filterFn = options.filterFn;\n  var scope = thisArg[scopeKey].get(scopeId);\n\n  if (!scope || scope && scope.globalKey !== globalKey) {\n    var parent = dom.find(scopeId);\n\n    if (!parent) {\n      log(Messages.NO_PARENT_FOUND_IN_SCOPE(scopeId));\n      return;\n    }\n\n    var elements = dom.findAll(\"[\".concat(componentAttribute, \"]\"), parent);\n\n    if (typeof filterFn === \"function\") {\n      elements = filterFn(elements);\n    } else {\n      elements = filterByAttrValue(elements, componentAttribute, errorMessage);\n    }\n\n    if (!elements || !elements.length) return;\n    thisArg[scopeKey].set(scopeId, {\n      elements: elements,\n      parent: parent,\n      globalKey: globalKey\n    });\n  } else {\n    log(Messages.DUPLICATE_SCOPE_ERROR(scopeId));\n  }\n};\n\nvar assignGlobal = function assignGlobal() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var thisArg = options.thisArg,\n      scopeKey = options.scopeKey,\n      componentAttribute = options.componentAttribute,\n      globalKey = options.globalKey,\n      errorMessage = options.errorMessage,\n      filterFn = options.filterFn;\n  var scopes = thisArg[scopeKey];\n  var elements = dom.findAll(\"[\".concat(componentAttribute, \"]\"));\n  if (typeof filterFn === \"function\") elements = filterFn(elements);\n\n  if (elements.length && scopes.size) {\n    scopes.forEach(function (scope) {\n      elements = elements.filter(function (component) {\n        var componentId = dom.getAttr(component, componentAttribute);\n\n        if (!componentId) {\n          log(errorMessage);\n          return false;\n        }\n\n        return Boolean(!dom.find(\"[\".concat(componentAttribute, \"='\").concat(componentId, \"']\"), scope.parent));\n      });\n    });\n  } else {\n    elements = filterByAttrValue(elements, componentAttribute, errorMessage);\n  }\n\n  thisArg[globalKey] = elements;\n};\n\nexport var setComponents = function setComponents() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (options.scopeId) {\n    assignScope(options);\n  } else {\n    assignGlobal(options);\n  }\n};\n//# sourceMappingURL=utils.js.map","export var Selectors = {\n  DATA_COLLAPSIBLE: \"data-collapsible\",\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  TABINDEX: \"tabindex\"\n};\nexport var CssProperties = {\n  MAX_HEIGHT: \"maxHeight\"\n};\nexport var Events = {\n  CLICK: \"click\"\n};\nexport var Messages = {\n  NO_COLLAPSIBLE_ID_ERROR: \"Could not initialize collapsible; you must include a value for the 'data-collapsible' attribute.\",\n  NO_TRIGGER_ERROR: function NO_TRIGGER_ERROR(id) {\n    return \"Could not find collapsible trigger with [data-target='\".concat(id, \"']; you can't have a collapsible without a trigger.\");\n  },\n  NO_TRIGGER_ID_ERROR: function NO_TRIGGER_ID_ERROR(id) {\n    return \"Could not find id on collapsible trigger with [data-target='\".concat(id, \"'].\");\n  },\n  NO_CONTENT_ERROR: function NO_CONTENT_ERROR(id) {\n    return \"Could not find collapsible content with id '\".concat(id, \"'; you can't have a collapsible without content.\");\n  }\n};\n//# sourceMappingURL=constants.js.map","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { getFocusableElements, dom, isBrowserEnv, getPageBaseFontSize, log, setComponents } from \"../helpers\";\nimport { Selectors, CssProperties, Events, Messages } from \"./constants\";\n\nvar Collapsible = function () {\n  function Collapsible() {\n    _classCallCheck(this, Collapsible);\n\n    this._handleClick = this._handleClick.bind(this);\n    this._setCollapsibles = this._setCollapsibles.bind(this);\n    this._setup = this._setup.bind(this);\n    this._teardown = this._teardown.bind(this);\n    this._collapsibles = [];\n    this._collapsibleTriggers = [];\n    this._collapsibleScopes = new Map();\n    this._activeCollapsible = {};\n    this._activeTrigger = {};\n    this._activeContent = {};\n    this._activeCollapsibleId = \"\";\n    this._nextAriaExpandedState = \"\";\n    this._nextAriaHiddenState = \"\";\n  }\n\n  _createClass(Collapsible, [{\n    key: \"start\",\n    value: function start(scopeId) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (!isBrowserEnv) return;\n      var controlled = options.controlled,\n          onClick = options.onClick;\n\n      var filterFn = function filterFn(elements) {\n        return _this._setCollapsibles(elements, controlled);\n      };\n\n      setComponents({\n        thisArg: this,\n        scopeId: scopeId,\n        scopeKey: \"_collapsibleScopes\",\n        componentAttribute: Selectors.DATA_COLLAPSIBLE,\n        globalKey: \"_collapsibles\",\n        errorMessage: Messages.NO_COLLAPSIBLE_ID_ERROR,\n        filterFn: filterFn\n      });\n      this._handleClickFn = onClick || this._handleClick.bind(this);\n\n      if (scopeId && this._collapsibleScopes.has(scopeId)) {\n        this._collapsibleScopes.get(scopeId).elements.forEach(this._setup);\n      } else if (this._collapsibles.length) {\n        this._collapsibles.forEach(this._setup);\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(scopeId) {\n      if (!isBrowserEnv) return;\n\n      if (scopeId && this._collapsibleScopes.has(scopeId)) {\n        this._collapsibleScopes.get(scopeId).elements.forEach(this._teardown);\n\n        this._collapsibleScopes.delete(scopeId);\n      } else if (this._collapsibles.length) {\n        this._collapsibles.forEach(this._teardown);\n\n        this._collapsibles = [];\n      }\n    }\n  }, {\n    key: \"toggleCollapsible\",\n    value: function toggleCollapsible() {\n      var metadata = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var collapsible = metadata.collapsible,\n          trigger = metadata.trigger,\n          content = metadata.content,\n          id = metadata.id,\n          nextAriaExpandState = metadata.nextAriaExpandState,\n          nextAriaHiddenState = metadata.nextAriaHiddenState;\n      var collapsibleId = id || this._activeCollapsibleId;\n      var collapsibleInstance = collapsible || this._activeCollapsible;\n      var triggerInstance = trigger || this._activeTrigger;\n      var contentInstance = content || this._activeContent;\n      var nextAriaExpandStateValue = nextAriaExpandState || this._nextAriaExpandedState;\n      var nextAriaHiddenStateValue = nextAriaHiddenState || this._nextAriaHiddenState;\n      dom.setAttr(collapsibleInstance, Selectors.DATA_VISIBLE, nextAriaExpandStateValue);\n      dom.setAttr(triggerInstance, Selectors.ARIA_EXPANDED, nextAriaExpandStateValue);\n      dom.setAttr(contentInstance, Selectors.ARIA_HIDDEN, nextAriaHiddenStateValue);\n      getFocusableElements(\"#\".concat(collapsibleId)).forEach(function (element) {\n        var value = nextAriaExpandStateValue === \"true\" ? \"0\" : \"-1\";\n        dom.setAttr(element, Selectors.TABINDEX, value);\n      });\n\n      if (dom.getStyle(contentInstance, CssProperties.MAX_HEIGHT)) {\n        dom.setStyle(contentInstance, CssProperties.MAX_HEIGHT, null);\n      } else {\n        dom.setStyle(contentInstance, CssProperties.MAX_HEIGHT, this._getFontSizeEm(contentInstance.scrollHeight));\n      }\n    }\n  }, {\n    key: \"_setup\",\n    value: function _setup(instance) {\n      var _this$_getCollapsible = this._getCollapsibleData(instance),\n          trigger = _this$_getCollapsible.trigger,\n          id = _this$_getCollapsible.id;\n\n      var collapsibleContentId = \"#\".concat(id);\n      var collapsibleContent = dom.find(collapsibleContentId, instance);\n\n      if (!collapsibleContent) {\n        log(Messages.NO_CONTENT_ERROR(id));\n        return;\n      }\n\n      if (!trigger.id) {\n        log(Messages.NO_TRIGGER_ID_ERROR(id));\n        return;\n      }\n\n      dom.setAttr(trigger, Selectors.ARIA_CONTROLS, id);\n      dom.setAttr(collapsibleContent, Selectors.ARIA_LABELLEDBY, trigger.id);\n      var collapsibleContentFocusableChildren = getFocusableElements(collapsibleContentId);\n      var contentShouldExpand = dom.getAttr(instance, Selectors.DATA_VISIBLE);\n\n      if (contentShouldExpand === \"false\") {\n        dom.setAttr(trigger, Selectors.ARIA_EXPANDED, \"false\");\n        dom.setAttr(collapsibleContent, Selectors.ARIA_HIDDEN, \"true\");\n        collapsibleContentFocusableChildren.forEach(function (element) {\n          dom.setAttr(element, Selectors.TABINDEX, \"-1\");\n        });\n      } else {\n        dom.setAttr(instance, Selectors.DATA_VISIBLE, \"true\");\n        dom.setStyle(collapsibleContent, CssProperties.MAX_HEIGHT, this._getFontSizeEm(collapsibleContent.scrollHeight));\n        dom.setAttr(trigger, Selectors.ARIA_EXPANDED, \"true\");\n        dom.setAttr(collapsibleContent, Selectors.ARIA_HIDDEN, \"false\");\n        collapsibleContentFocusableChildren.forEach(function (element) {\n          dom.setAttr(element, Selectors.TABINDEX, \"0\");\n        });\n      }\n\n      this._collapsibleTriggers.push(trigger);\n\n      trigger.addEventListener(Events.CLICK, this._handleClickFn);\n    }\n  }, {\n    key: \"_teardown\",\n    value: function _teardown(instance) {\n      var _this$_getCollapsible2 = this._getCollapsibleData(instance),\n          trigger = _this$_getCollapsible2.trigger;\n\n      trigger.removeEventListener(Events.CLICK, this._handleClickFn);\n    }\n  }, {\n    key: \"_handleClick\",\n    value: function _handleClick(event) {\n      event.preventDefault();\n      this._activeTrigger = event.target;\n\n      this._setIds();\n\n      this._setActiveCollapsible();\n\n      this._setActiveContent();\n\n      this._setNextVisibleState();\n\n      this.toggleCollapsible();\n      this._activeCollapsible = null;\n      this._activeTrigger = null;\n      this._activeContent = null;\n    }\n  }, {\n    key: \"_getCollapsibleData\",\n    value: function _getCollapsibleData(instance) {\n      var id = dom.getAttr(instance, Selectors.DATA_COLLAPSIBLE);\n\n      var collapsibleTriggerTargetAttr = this._getTargetAttr(id);\n\n      var trigger = dom.find(collapsibleTriggerTargetAttr, instance);\n      return {\n        id: id,\n        trigger: trigger\n      };\n    }\n  }, {\n    key: \"_setCollapsibles\",\n    value: function _setCollapsibles(elements, controlled) {\n      var _this2 = this;\n\n      return elements.filter(function (instance) {\n        var id = dom.getAttr(instance, Selectors.DATA_COLLAPSIBLE);\n\n        if (!id) {\n          log(Messages.NO_COLLAPSIBLE_ID_ERROR);\n          return false;\n        }\n\n        var collapsibleTriggerTargetAttr = _this2._getTargetAttr(id);\n\n        var trigger = dom.find(collapsibleTriggerTargetAttr, instance);\n\n        if (!trigger) {\n          log(Messages.NO_TRIGGER_ERROR(id));\n          return false;\n        }\n\n        if (controlled) {\n          return dom.hasAttr(trigger, Selectors.DATA_PARENT);\n        }\n\n        return !dom.hasAttr(trigger, Selectors.DATA_PARENT);\n      });\n    }\n  }, {\n    key: \"_setActiveContent\",\n    value: function _setActiveContent() {\n      this._activeContent = dom.find(\"#\".concat(this._activeCollapsibleId));\n    }\n  }, {\n    key: \"_setNextVisibleState\",\n    value: function _setNextVisibleState() {\n      var currentVisibleState = dom.getAttr(this._activeCollapsible, Selectors.DATA_VISIBLE);\n      this._nextAriaExpandedState = currentVisibleState === \"true\" ? \"false\" : \"true\";\n      this._nextAriaHiddenState = currentVisibleState === \"false\" ? \"false\" : \"true\";\n    }\n  }, {\n    key: \"_setIds\",\n    value: function _setIds() {\n      this._activeCollapsibleId = dom.getAttr(this._activeTrigger, Selectors.DATA_TARGET);\n    }\n  }, {\n    key: \"_setActiveCollapsible\",\n    value: function _setActiveCollapsible() {\n      this._activeCollapsible = dom.find(\"[\".concat(Selectors.DATA_COLLAPSIBLE, \"='\").concat(this._activeCollapsibleId, \"']\"));\n    }\n  }, {\n    key: \"_getTargetAttr\",\n    value: function _getTargetAttr(id) {\n      return \"[\".concat(Selectors.DATA_TARGET, \"='\").concat(id, \"']\");\n    }\n  }, {\n    key: \"_getFontSizeEm\",\n    value: function _getFontSizeEm(pixels) {\n      return \"\".concat(pixels / getPageBaseFontSize(), \"rem\");\n    }\n  }]);\n\n  return Collapsible;\n}();\n\nexport { Collapsible as default };\n//# sourceMappingURL=collapsible.js.map","export var Selectors = {\n  DATA_ACCORDION: \"data-accordion\",\n  DATA_COLLAPSIBLE: \"data-collapsible\",\n  DATA_TOGGLE_MULTIPLE: \"data-toggle-multiple\",\n  DATA_PARENT: \"data-parent\",\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_HIDDEN: \"aria-hidden\"\n};\nexport var Messages = {\n  NO_ACCORDION_ID_ERROR: \"Could not initialize accordion; you must include a value for the 'data-accordion' attribute.\",\n  NO_ACCORDION_ERROR: function NO_ACCORDION_ERROR(id) {\n    return \"Could not find element matching [data-accordion='\".concat(id, \"']\");\n  },\n  TRIGGERS_TO_COLLAPSIBLES_LENGTH_WARNING: function TRIGGERS_TO_COLLAPSIBLES_LENGTH_WARNING(id, triggersLength, collapsiblesLength) {\n    return \"Your accordion with id '\".concat(id, \"' has \").concat(triggersLength, \" triggers and \").concat(collapsiblesLength, \" collapsibles; make sure there is a trigger for each collapsible!\");\n  }\n};\n//# sourceMappingURL=constants.js.map","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport Collapsible from \"../collapsible\";\nimport { dom, createFocusTrap, isBrowserEnv, setComponents, log } from \"../helpers\";\nimport { Selectors, Messages } from \"./constants\";\n\nvar Accordion = function (_Collapsible) {\n  _inherits(Accordion, _Collapsible);\n\n  function Accordion() {\n    var _this;\n\n    _classCallCheck(this, Accordion);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Accordion).call(this));\n    _this._handleClick = _this._handleClick.bind(_assertThisInitialized(_this));\n    _this._setFocusTraps = _this._setFocusTraps.bind(_assertThisInitialized(_this));\n    _this._accordions = [];\n    _this._focusTraps = [];\n    _this._accordionScopes = new Map();\n    _this._activeAccordionId = \"\";\n    _this._activeAccordion = {};\n    _this._toggleMultipleEnabled = false;\n    return _this;\n  }\n\n  _createClass(Accordion, [{\n    key: \"start\",\n    value: function start(scopeId) {\n      if (!isBrowserEnv) return;\n      var options = {\n        controlled: true,\n        onClick: this._handleClick\n      };\n      setComponents({\n        thisArg: this,\n        scopeId: scopeId,\n        scopeKey: \"_accordionScopes\",\n        componentAttribute: Selectors.DATA_ACCORDION,\n        globalKey: \"_accordions\",\n        errorMessage: Messages.NO_ACCORDION_ID_ERROR\n      });\n\n      _get(_getPrototypeOf(Accordion.prototype), \"start\", this).call(this, scopeId, options);\n\n      if (scopeId && this._accordionScopes.has(scopeId)) {\n        this._accordionScopes.get(scopeId).elements.forEach(this._setFocusTraps);\n      } else if (this._accordions.length) {\n        this._accordions.forEach(this._setFocusTraps);\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(scopeId) {\n      var _this2 = this;\n\n      if (!isBrowserEnv) return;\n\n      if (scopeId && this._accordionScopes.has(scopeId)) {\n        this._accordionScopes.get(scopeId).elements.forEach(function (instance) {\n          _get(_getPrototypeOf(Accordion.prototype), \"stop\", _this2).call(_this2, scopeId);\n\n          _this2._unsetFocusTraps(instance);\n        });\n\n        this._accordionScopes.delete(scopeId);\n      } else if (this._accordions.length) {\n        this._accordions.forEach(function (instance) {\n          _get(_getPrototypeOf(Accordion.prototype), \"stop\", _this2).call(_this2, scopeId);\n\n          _this2._unsetFocusTraps(instance);\n        });\n\n        this._accordions = [];\n      }\n    }\n  }, {\n    key: \"_unsetFocusTraps\",\n    value: function _unsetFocusTraps(instance) {\n      var id = dom.getAttr(instance, Selectors.DATA_ACCORDION);\n      if (this._focusTraps[id]) this._focusTraps[id].stop();\n    }\n  }, {\n    key: \"_setFocusTraps\",\n    value: function _setFocusTraps(instance) {\n      var id = dom.getAttr(instance, Selectors.DATA_ACCORDION);\n\n      if (!id) {\n        log(Messages.NO_ACCORDION_ID_ERROR);\n        return;\n      }\n\n      var triggers = dom.findAll(\"[\".concat(Selectors.DATA_PARENT, \"='\").concat(id, \"']\"), instance);\n      var collapsibles = dom.findAll(\"[\".concat(Selectors.DATA_COLLAPSIBLE, \"]\"), instance);\n\n      if (triggers.length !== collapsibles.length) {\n        log(Messages.TRIGGERS_TO_COLLAPSIBLES_LENGTH_WARNING(id, triggers.length, collapsibles.length), \"warn\");\n      }\n\n      this._focusTraps[id] = createFocusTrap(null, {\n        children: triggers,\n        useArrows: true\n      });\n\n      this._focusTraps[id].start();\n    }\n  }, {\n    key: \"_handleClick\",\n    value: function _handleClick(event) {\n      var activeTrigger = event.target;\n\n      _get(_getPrototypeOf(Accordion.prototype), \"_handleClick\", this).call(this, event);\n\n      this._setActiveAccordionId(activeTrigger);\n\n      if (!this._activeAccordionId) {\n        log(Messages.NO_ACCORDION_ID_ERROR);\n        return;\n      }\n\n      this._setActiveAccordion();\n\n      if (!this._activeAccordion) {\n        log(Messages.NO_ACCORDION_ERROR(this._activeAccordionId));\n        return;\n      }\n\n      this._setToggleMultiple();\n\n      this._closeAllCollapsibles(activeTrigger);\n    }\n  }, {\n    key: \"_closeAllCollapsibles\",\n    value: function _closeAllCollapsibles(activeTrigger) {\n      var _this3 = this;\n\n      if (this._toggleMultipleEnabled) return;\n      var openCollapsibles = dom.findAll(\"[\".concat(Selectors.DATA_PARENT, \"='\").concat(this._activeAccordionId, \"']\"), this._activeAccordion).filter(function (trigger) {\n        return trigger !== activeTrigger && _this3._isExpanded(trigger);\n      });\n\n      if (openCollapsibles.length && this._isExpanded(activeTrigger)) {\n        openCollapsibles.forEach(this._closeCollapsible);\n      }\n    }\n  }, {\n    key: \"_closeCollapsible\",\n    value: function _closeCollapsible(trigger) {\n      var id = dom.getAttr(trigger, Selectors.DATA_TARGET);\n      var collapsible = dom.find(\"[\".concat(Selectors.DATA_COLLAPSIBLE, \"='\").concat(id, \"']\"));\n      var content = dom.find(\"#\".concat(id), collapsible);\n      var nextAriaExpandState = \"false\";\n      var nextAriaHiddenState = \"true\";\n\n      _get(_getPrototypeOf(Accordion.prototype), \"toggleCollapsible\", this).call(this, {\n        id: id,\n        collapsible: collapsible,\n        trigger: trigger,\n        content: content,\n        nextAriaExpandState: nextAriaExpandState,\n        nextAriaHiddenState: nextAriaHiddenState\n      });\n    }\n  }, {\n    key: \"_isExpanded\",\n    value: function _isExpanded(trigger) {\n      var id = dom.getAttr(trigger, Selectors.DATA_TARGET);\n      var collapsible = dom.find(\"[\".concat(Selectors.DATA_ACCORDION, \"='\").concat(this._activeAccordionId, \"'] [\").concat(Selectors.DATA_COLLAPSIBLE, \"='\").concat(id, \"']\"));\n      return dom.getAttr(collapsible, Selectors.DATA_VISIBLE) === \"true\";\n    }\n  }, {\n    key: \"_setActiveAccordionId\",\n    value: function _setActiveAccordionId(trigger) {\n      this._activeAccordionId = dom.getAttr(trigger, Selectors.DATA_PARENT);\n    }\n  }, {\n    key: \"_setActiveAccordion\",\n    value: function _setActiveAccordion() {\n      this._activeAccordion = dom.find(\"[\".concat(Selectors.DATA_ACCORDION, \"='\").concat(this._activeAccordionId, \"']\"));\n    }\n  }, {\n    key: \"_setToggleMultiple\",\n    value: function _setToggleMultiple() {\n      this._toggleMultipleEnabled = dom.hasAttr(this._activeAccordion, Selectors.DATA_TOGGLE_MULTIPLE);\n    }\n  }]);\n\n  return Accordion;\n}(Collapsible);\n\nexport { Accordion as default };\n//# sourceMappingURL=accordion.js.map","export var KeyCodes = {\n  TAB: 9,\n  SHIFT: 16,\n  ESCAPE: 27,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40\n};\nexport var Selectors = {\n  DATA_DROPDOWN: \"data-dropdown\",\n  DROPDOWN_MENU_CLASS: \"dropdown-menu\",\n  DATA_TARGET: \"data-target\",\n  DATA_PARENT: \"data-parent\",\n  DATA_VISIBLE: \"data-visible\",\n  TABINDEX: \"tabindex\",\n  ARIA_HASPOPUP: \"aria-haspopup\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  ARIA_EXPANDED: \"aria-expanded\",\n  ROLE: \"role\"\n};\nexport var Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  BLUR: \"blur\"\n};\nexport var CssProperties = {\n  CURSOR: \"cursor\"\n};\nexport var CssValues = {\n  POINTER: \"pointer\"\n};\nexport var Messages = {\n  NO_DROPDOWN_ID_ERROR: \"Could not setup dropdown. Make sure it has a valid [data-dropdown] attribute with a unique id as its value.\",\n  NO_MENU_ERROR: function NO_MENU_ERROR(attr) {\n    return \"Could not find menu associated with \".concat(attr, \".\");\n  },\n  NO_DROPDOWN_ITEMS_ERROR: function NO_DROPDOWN_ITEMS_ERROR(attr) {\n    return \"Could not find any list items associated with \".concat(attr, \".\");\n  },\n  NO_DROPDOWN_ACTIONS_ERROR: function NO_DROPDOWN_ACTIONS_ERROR(attr) {\n    return \"Could not find any button or anchor elements associated with \".concat(attr, \".\");\n  },\n  NO_PARENT_ERROR: \"Could not find dropdown button's [data-parent] attribute.\"\n};\n//# sourceMappingURL=constants.js.map","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { iOSMobile, dom, isBrowserEnv, createFocusTrap, focusOnce, log, setComponents } from \"../helpers\";\nimport { KeyCodes, Selectors, Events, CssProperties, CssValues, Messages } from \"./constants\";\n\nvar Dropdown = function () {\n  function Dropdown() {\n    _classCallCheck(this, Dropdown);\n\n    this._handleClick = this._handleClick.bind(this);\n    this._handleFirstTabClose = this._handleFirstTabClose.bind(this);\n    this._handleLastTabClose = this._handleLastTabClose.bind(this);\n    this._handleArrowKeyPress = this._handleArrowKeyPress.bind(this);\n    this._handleCloseClick = this._handleCloseClick.bind(this);\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this);\n    this._handleOffMenuClick = this._handleOffMenuClick.bind(this);\n    this._setup = this._setup.bind(this);\n    this._teardown = this._teardown.bind(this);\n    this._dropdowns = [];\n    this._scopes = new Map();\n    this._activeDropdown = null;\n    this._activeDropdownTrigger = null;\n    this._activeDropdownMenu = null;\n    this._activeDropdownActions = [];\n    this._allowFocusReturn = true;\n    this._activeDropdownId = \"\";\n    this._activeDropdownAttr = \"\";\n    this._activeDropdownMenuId = \"\";\n    this._firstDropdownAction = null;\n    this._lastDropdownAction = null;\n    this._focusTrap = null;\n    this._dropdownContainerAttr = \"[\".concat(Selectors.DATA_DROPDOWN, \"]\");\n    this._dropdownTargetAttr = \"[\".concat(Selectors.DATA_TARGET, \"]\");\n    this._dropdownMenuClassName = \".\".concat(Selectors.DROPDOWN_MENU_CLASS);\n  }\n\n  _createClass(Dropdown, [{\n    key: \"start\",\n    value: function start(scopeId) {\n      if (!isBrowserEnv) return;\n      setComponents({\n        thisArg: this,\n        scopeId: scopeId,\n        scopeKey: \"_scopes\",\n        componentAttribute: Selectors.DATA_DROPDOWN,\n        globalKey: \"_dropdowns\",\n        errorMessage: Messages.NO_DROPDOWN_ID_ERROR\n      });\n\n      if (scopeId && this._scopes.has(scopeId)) {\n        this._scopes.get(scopeId).elements.forEach(this._setup);\n      } else if (this._dropdowns.length) {\n        this._dropdowns.forEach(this._setup);\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(scopeId) {\n      var _this = this;\n\n      if (!isBrowserEnv) return;\n\n      if (scopeId && this._scopes.has(scopeId)) {\n        var _this$_scopes$get = this._scopes.get(scopeId),\n            elements = _this$_scopes$get.elements;\n\n        elements.forEach(function (instance) {\n          var dropdown = dom.find(\"\".concat(_this._dropdownMenuClassName), instance);\n\n          if (dom.getAttr(dropdown, Selectors.DATA_VISIBLE) === \"true\") {\n            _this._closeActiveDropdownMenu();\n          }\n        });\n        elements.forEach(this._teardown);\n\n        this._scopes.delete(scopeId);\n      } else if (!scopeId && this._dropdowns.length) {\n        if (this._activeDropdown) this._closeActiveDropdownMenu();\n\n        this._dropdowns.forEach(this._teardown);\n      }\n    }\n  }, {\n    key: \"_setup\",\n    value: function _setup(instance) {\n      var dropdownId = instance.getAttribute(Selectors.DATA_DROPDOWN);\n\n      if (!dropdownId) {\n        log(Messages.NO_DROPDOWN_ID_ERROR);\n        return;\n      }\n\n      var dropdownAttr = \"[\".concat(Selectors.DATA_DROPDOWN, \"=\\\"\").concat(dropdownId, \"\\\"]\");\n      var dropdownTrigger = dom.find(\"\".concat(dropdownAttr, \" > \").concat(this._dropdownTargetAttr));\n\n      if (!dom.getAttr(dropdownTrigger, Selectors.DATA_PARENT)) {\n        log(Messages.NO_PARENT_ERROR);\n        return;\n      }\n\n      var dropdownMenu = dom.find(\"\".concat(dropdownAttr, \" > \").concat(this._dropdownMenuClassName));\n\n      if (!dropdownMenu) {\n        log(Messages.NO_MENU_ERROR(dropdownAttr));\n        return;\n      }\n\n      dom.setAttr(dropdownMenu, Selectors.ARIA_LABELLEDBY, dropdownTrigger.id);\n      dom.setAttr(dropdownTrigger, Selectors.ARIA_CONTROLS, dropdownMenu.id);\n      dom.setAttr(dropdownTrigger, Selectors.ARIA_HASPOPUP, \"true\");\n      dom.setAttr(dropdownTrigger, Selectors.ARIA_EXPANDED, \"false\");\n      var dropdownMenuItemsAttr = \"\".concat(dropdownAttr, \" > \").concat(this._dropdownMenuClassName, \" > li\");\n      var dropdownMenuListItems = dom.findAll(dropdownMenuItemsAttr);\n\n      if (!dropdownMenuListItems.length) {\n        log(Messages.NO_DROPDOWN_ITEMS_ERROR(dropdownAttr));\n        return;\n      }\n\n      dropdownMenuListItems.forEach(function (item) {\n        return dom.setAttr(item, Selectors.ROLE, \"none\");\n      });\n\n      var dropdownMenuTriggers = this._getDropdownActions(dropdownAttr);\n\n      if (!dropdownMenuTriggers.length) {\n        log(Messages.NO_DROPDOWN_ACTIONS_ERROR(dropdownAttr));\n        return;\n      }\n\n      dropdownMenuTriggers.forEach(function (trigger) {\n        dom.setAttr(trigger, Selectors.ROLE, \"menuitem\");\n        dom.setAttr(trigger, Selectors.TABINDEX, \"-1\");\n      });\n      dropdownTrigger.addEventListener(Events.CLICK, this._handleClick);\n      dropdownTrigger.addEventListener(Events.KEYDOWN, this._handleArrowKeyPress);\n    }\n  }, {\n    key: \"_teardown\",\n    value: function _teardown(instance) {\n      var id = dom.getAttr(instance, Selectors.DATA_DROPDOWN);\n      var trigger = dom.find(\"[\".concat(Selectors.DATA_PARENT, \"='\").concat(id, \"']\"), instance);\n      trigger.removeEventListener(Events.CLICK, this._handleClick);\n      trigger.removeEventListener(Events.KEYDOWN, this._handleArrowKeyPress);\n    }\n  }, {\n    key: \"_handleClick\",\n    value: function _handleClick(event, key) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this._closeOpenDropdowns(event);\n\n      this._activeDropdownTrigger = event.target;\n\n      this._setActiveDropdownId();\n\n      this._setActiveDropdown();\n\n      this._setActiveDropdownMenu();\n\n      this._setVisibleState();\n\n      this._startActiveDropdownEvents();\n\n      if (key && key === KeyCodes.ARROW_UP) {\n        this._lastDropdownAction.focus();\n      } else {\n        this._firstDropdownAction.focus();\n      }\n\n      if (iOSMobile) dom.setStyle(document.body, CssProperties.CURSOR, CssValues.POINTER);\n    }\n  }, {\n    key: \"_handleCloseClick\",\n    value: function _handleCloseClick() {\n      this._closeActiveDropdownMenu();\n    }\n  }, {\n    key: \"_closeActiveDropdownMenu\",\n    value: function _closeActiveDropdownMenu() {\n      if (this._allowFocusReturn) this._handleReturnFocus();\n\n      this._closeActiveDropdown();\n    }\n  }, {\n    key: \"_closeActiveDropdown\",\n    value: function _closeActiveDropdown() {\n      var _this2 = this;\n\n      if (iOSMobile) dom.setStyle(document.body, CssProperties.CURSOR, CssValues.POINTER);\n      dom.setAttr(this._activeDropdown, Selectors.DATA_VISIBLE, \"false\");\n      dom.setAttr(this._activeDropdownTrigger, Selectors.ARIA_EXPANDED, \"false\");\n\n      this._activeDropdownTrigger.removeEventListener(Events.CLICK, this._handleCloseClick);\n\n      this._activeDropdownTrigger.addEventListener(Events.CLICK, this._handleClick);\n\n      document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress);\n      document.removeEventListener(Events.CLICK, this._handleOffMenuClick);\n\n      this._firstDropdownAction.removeEventListener(Events.KEYDOWN, this._handleFirstTabClose);\n\n      this._lastDropdownAction.removeEventListener(Events.KEYDOWN, this._handleLastTabClose);\n\n      this._activeDropdownActions.forEach(function (action) {\n        dom.setAttr(action, Selectors.TABINDEX, \"-1\");\n        action.removeEventListener(Events.CLICK, _this2._handleCloseClick);\n      });\n\n      this._focusTrap.stop();\n\n      this._focusTrap = null;\n\n      this._resetProperties();\n    }\n  }, {\n    key: \"_resetProperties\",\n    value: function _resetProperties() {\n      this._activeDropdown = null;\n      this._activeDropdownTrigger = null;\n      this._activeDropdownMenu = null;\n      this._activeDropdownActions = [];\n      this._allowFocusReturn = true;\n      this._activeDropdownId = \"\";\n      this._activeDropdownAttr = \"\";\n      this._activeDropdownMenuId = \"\";\n      this._firstDropdownAction = null;\n      this._lastDropdownAction = null;\n      this._focusTrap = null;\n    }\n  }, {\n    key: \"_setActiveDropdownId\",\n    value: function _setActiveDropdownId() {\n      this._activeDropdownId = dom.getAttr(this._activeDropdownTrigger, Selectors.DATA_PARENT);\n    }\n  }, {\n    key: \"_startActiveDropdownEvents\",\n    value: function _startActiveDropdownEvents() {\n      var _this3 = this;\n\n      this._activeDropdownTrigger.removeEventListener(Events.CLICK, this._handleClick);\n\n      this._activeDropdownTrigger.addEventListener(Events.CLICK, this._handleCloseClick);\n\n      document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress);\n      document.addEventListener(Events.CLICK, this._handleOffMenuClick);\n      this._activeDropdownActions = this._getDropdownActions(this._activeDropdownAttr);\n      this._firstDropdownAction = this._activeDropdownActions[0];\n      this._lastDropdownAction = this._activeDropdownActions[this._activeDropdownActions.length - 1];\n\n      this._firstDropdownAction.addEventListener(Events.KEYDOWN, this._handleFirstTabClose);\n\n      this._lastDropdownAction.addEventListener(Events.KEYDOWN, this._handleLastTabClose);\n\n      this._activeDropdownActions.forEach(function (action) {\n        dom.setAttr(action, Selectors.TABINDEX, \"0\");\n        action.addEventListener(Events.CLICK, _this3._handleCloseClick);\n      });\n\n      var containerSelector = \"\".concat(this._activeDropdownAttr, \" > \").concat(this._dropdownMenuClassName);\n\n      if (this._focusTrap) {\n        this._focusTrap.stop();\n      }\n\n      this._focusTrap = createFocusTrap(containerSelector, {\n        useArrows: true\n      });\n\n      this._focusTrap.start();\n    }\n  }, {\n    key: \"_setVisibleState\",\n    value: function _setVisibleState() {\n      dom.setAttr(this._activeDropdownTrigger, Selectors.ARIA_EXPANDED, \"true\");\n      dom.setAttr(this._activeDropdown, Selectors.DATA_VISIBLE, \"true\");\n    }\n  }, {\n    key: \"_setActiveDropdownMenu\",\n    value: function _setActiveDropdownMenu() {\n      this._activeDropdownMenuId = dom.getAttr(this._activeDropdownTrigger, Selectors.DATA_TARGET);\n      this._activeDropdownMenu = dom.find(\"#\".concat(this._activeDropdownMenuId));\n    }\n  }, {\n    key: \"_setActiveDropdown\",\n    value: function _setActiveDropdown() {\n      this._activeDropdownAttr = \"[\".concat(Selectors.DATA_DROPDOWN, \"=\\\"\").concat(this._activeDropdownId, \"\\\"]\");\n      this._activeDropdown = dom.find(this._activeDropdownAttr);\n    }\n  }, {\n    key: \"_closeOpenDropdowns\",\n    value: function _closeOpenDropdowns(event) {\n      if (!this._activeDropdownTrigger) return;\n      this._allowFocusReturn = false;\n\n      this._handleCloseClick(event);\n\n      this._allowFocusReturn = true;\n    }\n  }, {\n    key: \"_handleFirstTabClose\",\n    value: function _handleFirstTabClose(event) {\n      var shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey;\n      var tabKey = event.which === KeyCodes.TAB;\n\n      if (shiftKey && tabKey) {\n        this._handleCloseClick(event);\n      }\n    }\n  }, {\n    key: \"_handleLastTabClose\",\n    value: function _handleLastTabClose(event) {\n      var shiftKey = event.which === KeyCodes.SHIFT || event.shiftKey;\n      var tabKey = event.which === KeyCodes.TAB;\n\n      if (tabKey && !shiftKey) {\n        this._handleCloseClick(event);\n      }\n    }\n  }, {\n    key: \"_handleArrowKeyPress\",\n    value: function _handleArrowKeyPress(event) {\n      if (event.which === KeyCodes.ARROW_UP || event.which === KeyCodes.ARROW_DOWN) {\n        this._handleClick(event, event.which);\n      }\n    }\n  }, {\n    key: \"_handleEscapeKeyPress\",\n    value: function _handleEscapeKeyPress(event) {\n      if (event.which === KeyCodes.ESCAPE) {\n        this._handleCloseClick(event);\n      }\n    }\n  }, {\n    key: \"_handleOffMenuClick\",\n    value: function _handleOffMenuClick(event) {\n      if (event.target !== this._activeDropdownTrigger && event.target !== this._activeDropdownMenu) {\n        this._handleCloseClick(event);\n      }\n    }\n  }, {\n    key: \"_handleReturnFocus\",\n    value: function _handleReturnFocus() {\n      if (!this._activeDropdownTrigger) return;\n      focusOnce(this._activeDropdownTrigger);\n    }\n  }, {\n    key: \"_getDropdownActions\",\n    value: function _getDropdownActions(attr) {\n      return dom.findAll(\"\".concat(attr, \" > \").concat(this._dropdownMenuClassName, \" > li > a, \").concat(attr, \" > \").concat(this._dropdownMenuClassName, \" > li > button\"));\n    }\n  }]);\n\n  return Dropdown;\n}();\n\nexport { Dropdown as default };\n//# sourceMappingURL=dropdown.js.map","export var KeyCodes = {\n  ESCAPE: 27\n};\nexport var Selectors = {\n  DATA_MODAL: \"data-modal\",\n  DATA_TARGET: \"data-target\",\n  DATA_VISIBLE: \"data-visible\",\n  DATA_CLOSE: \"data-close\",\n  DATA_PARENT: \"data-parent\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_MODAL: \"aria-modal\",\n  ROLE: \"role\",\n  TABINDEX: \"tabindex\",\n  NO_SCROLL: \"no-scroll\"\n};\nexport var CssProperties = {\n  PADDING_RIGHT: \"paddingRight\",\n  PADDING_LEFT: \"paddingLeft\",\n  CURSOR: \"cursor\"\n};\nexport var CssValues = {\n  AUTO: \"auto\",\n  POINTER: \"pointer\"\n};\nexport var Events = {\n  KEYDOWN: \"keydown\",\n  CLICK: \"click\",\n  RESIZE: \"resize\",\n  BLUR: \"blur\"\n};\nexport var Messages = {\n  NO_TRIGGER_ERROR: function NO_TRIGGER_ERROR(id) {\n    return \"Could not find modal trigger with id \".concat(id, \".\");\n  },\n  NO_ID_ERROR: \"Could not detect an id on your [data-modal] element. Please add a value matching the modal trigger's [data-parent] attribute.\",\n  NO_MODAL_DIALOG_ERROR: function NO_MODAL_DIALOG_ERROR(id) {\n    return \"Could not find element with attribute [data-parent='\".concat(id, \"'].\");\n  }\n};\n//# sourceMappingURL=constants.js.map","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { iOSMobile, getFocusableElements, dom, isBrowserEnv, createFocusTrap, focusOnce, log, setComponents } from \"../helpers\";\nimport { KeyCodes, Selectors, CssProperties, CssValues, Events, Messages } from \"./constants\";\nvar COMPONENT_ROLE = \"dialog\";\n\nvar Modal = function () {\n  function Modal() {\n    _classCallCheck(this, Modal);\n\n    this._handleClick = this._handleClick.bind(this);\n    this._handleCloseClick = this._handleCloseClick.bind(this);\n    this._handleOverlayClick = this._handleOverlayClick.bind(this);\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this);\n    this._setup = this._setup.bind(this);\n    this._teardown = this._teardown.bind(this);\n    this._modals = [];\n    this._scopes = new Map();\n    this._activeModalTrigger = null;\n    this._activeModalOverlayAttr = \"\";\n    this._activeModalOverlay = null;\n    this._activeModal = null;\n    this._activeModalId = \"\";\n    this._activeModalSelector = \"\";\n    this._activeModalCloseTriggers = [];\n    this._originalPagePadding = \"\";\n    this._scrollbarOffset = null;\n    this._focusTrap = null;\n  }\n\n  _createClass(Modal, [{\n    key: \"start\",\n    value: function start(scopeId) {\n      if (!isBrowserEnv) return;\n      setComponents({\n        thisArg: this,\n        scopeId: scopeId,\n        scopeKey: \"_scopes\",\n        componentAttribute: Selectors.DATA_MODAL,\n        globalKey: \"_modals\",\n        errorMessage: Messages.NO_ID_ERROR\n      });\n\n      if (scopeId && this._scopes.has(scopeId)) {\n        this._scopes.get(scopeId).elements.forEach(this._setup);\n      } else if (this._modals.length) {\n        this._modals.forEach(this._setup);\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(scopeId) {\n      var _this = this;\n\n      if (!isBrowserEnv) return;\n\n      if (scopeId && this._scopes.has(scopeId)) {\n        var _this$_scopes$get = this._scopes.get(scopeId),\n            elements = _this$_scopes$get.elements;\n\n        elements.forEach(function (instance) {\n          if (dom.getAttr(instance, Selectors.DATA_VISIBLE) !== \"true\") return;\n\n          _this._closeActiveModal();\n        });\n        elements.forEach(this._teardown);\n\n        this._scopes.delete(scopeId);\n      } else if (this._modals.length) {\n        if (this._activeModal) this._closeActiveModal();\n\n        this._modals.forEach(this._teardown);\n      }\n    }\n  }, {\n    key: \"_setup\",\n    value: function _setup(instance) {\n      var modalId = dom.getAttr(instance, Selectors.DATA_MODAL);\n\n      if (!modalId) {\n        log(Messages.NO_ID_ERROR);\n        return;\n      }\n\n      var modalWrapperAttr = \"[\".concat(Selectors.DATA_MODAL, \"='\").concat(modalId, \"']\");\n      var modalWrapper = dom.find(modalWrapperAttr);\n      getFocusableElements(modalWrapperAttr).forEach(function (element) {\n        return dom.setAttr(element, Selectors.TABINDEX, \"-1\");\n      });\n      var modal = dom.find(\"[\".concat(Selectors.DATA_PARENT, \"='\").concat(modalId, \"']\"), instance);\n\n      if (!modal) {\n        log(Messages.NO_MODAL_DIALOG_ERROR(modalId));\n        return;\n      }\n\n      dom.setAttr(modalWrapper, Selectors.ARIA_HIDDEN, \"true\");\n      dom.setAttr(modalWrapper, Selectors.DATA_VISIBLE, \"false\");\n      dom.setAttr(modal, Selectors.ARIA_MODAL, \"true\");\n      dom.setAttr(modal, Selectors.ROLE, COMPONENT_ROLE);\n      var trigger = dom.find(\"[\".concat(Selectors.DATA_TARGET, \"='\").concat(modalId, \"']\"));\n\n      if (!trigger) {\n        log(Messages.NO_TRIGGER_ERROR(modalId));\n        return;\n      }\n\n      trigger.addEventListener(Events.CLICK, this._handleClick);\n    }\n  }, {\n    key: \"_teardown\",\n    value: function _teardown(instance) {\n      var id = dom.getAttr(instance, Selectors.DATA_MODAL);\n      var trigger = dom.find(\"[\".concat(Selectors.DATA_TARGET, \"='\").concat(id, \"']\"));\n      trigger.removeEventListener(Events.CLICK, this._handleClick);\n    }\n  }, {\n    key: \"_handleClick\",\n    value: function _handleClick(event) {\n      event.preventDefault();\n      this._activeModalTrigger = event.target;\n\n      this._setActiveModalId();\n\n      this._setActiveModalOverlay();\n\n      this._setActiveModal();\n\n      this._setScrollbarOffset();\n\n      this._setScrollStop();\n\n      this._focusTrap = createFocusTrap(this._activeModalSelector);\n\n      this._focusTrap.start();\n\n      this._changeDialogVisibility(true);\n\n      this._changeTabindexOnChildren(\"0\");\n\n      this._setCloseTriggers();\n\n      this._focusModalDialog();\n\n      this._activeModalOverlay.scrollTop = 0;\n\n      this._startEvents();\n    }\n  }, {\n    key: \"_handleCloseClick\",\n    value: function _handleCloseClick(event) {\n      event.preventDefault();\n\n      this._closeActiveModal();\n    }\n  }, {\n    key: \"_closeActiveModal\",\n    value: function _closeActiveModal() {\n      var _this2 = this;\n\n      this._changeDialogVisibility(false);\n\n      this._focusModalTrigger();\n\n      this._unsetScrollStop();\n\n      this._unsetScrollbarOffset();\n\n      document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress);\n      document.removeEventListener(Events.CLICK, this._handleOverlayClick);\n\n      this._changeTabindexOnChildren(\"-1\");\n\n      this._activeModalCloseTriggers.forEach(function (trigger) {\n        trigger.removeEventListener(Events.CLICK, _this2._handleCloseClick);\n        dom.setAttr(trigger, Selectors.TABINDEX, \"-1\");\n      });\n\n      this._focusTrap.stop();\n\n      this._resetProperties();\n    }\n  }, {\n    key: \"_resetProperties\",\n    value: function _resetProperties() {\n      this._activeModalTrigger = null;\n      this._activeModal = null;\n      this._activeModalId = \"\";\n      this._activeModalSelector = \"\";\n      this._activeModalCloseTriggers = [];\n      this._originalPagePadding = \"\";\n      this._scrollbarOffset = null;\n      this._focusTrap = null;\n    }\n  }, {\n    key: \"_changeTabindexOnChildren\",\n    value: function _changeTabindexOnChildren(value) {\n      var elements = getFocusableElements(this._activeModalOverlayAttr);\n      if (!elements.length) return;\n      elements.forEach(function (element) {\n        return dom.setAttr(element, Selectors.TABINDEX, value);\n      });\n    }\n  }, {\n    key: \"_setCloseTriggers\",\n    value: function _setCloseTriggers() {\n      this._activeModalCloseTriggers = dom.findAll(\"\".concat(this._activeModalSelector, \" [\").concat(Selectors.DATA_CLOSE, \"]\"));\n    }\n  }, {\n    key: \"_setActiveModalId\",\n    value: function _setActiveModalId() {\n      this._activeModalId = dom.getAttr(this._activeModalTrigger, Selectors.DATA_TARGET);\n    }\n  }, {\n    key: \"_setActiveModalOverlay\",\n    value: function _setActiveModalOverlay() {\n      this._activeModalOverlayAttr = \"[\".concat(Selectors.DATA_MODAL, \"='\").concat(this._activeModalId, \"']\");\n      this._activeModalOverlay = dom.find(\"[\".concat(Selectors.DATA_MODAL, \"='\").concat(this._activeModalId, \"']\"));\n    }\n  }, {\n    key: \"_setActiveModal\",\n    value: function _setActiveModal() {\n      this._activeModalSelector = \"[\".concat(Selectors.DATA_PARENT, \"='\").concat(this._activeModalId, \"']\");\n      this._activeModal = dom.find(this._activeModalSelector, this._activeModalOverlay);\n    }\n  }, {\n    key: \"_changeDialogVisibility\",\n    value: function _changeDialogVisibility(isVisible) {\n      dom.setAttr(this._activeModalOverlay, Selectors.ARIA_HIDDEN, isVisible ? \"false\" : \"true\");\n      dom.setAttr(this._activeModalOverlay, Selectors.DATA_VISIBLE, isVisible ? \"true\" : \"false\");\n\n      if (iOSMobile) {\n        dom.setStyle(this._activeModalOverlay, CssProperties.CURSOR, isVisible ? CssValues.POINTER : CssValues.AUTO);\n      }\n    }\n  }, {\n    key: \"_startEvents\",\n    value: function _startEvents() {\n      var _this3 = this;\n\n      document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress);\n      document.addEventListener(Events.CLICK, this._handleOverlayClick);\n\n      this._activeModalCloseTriggers.forEach(function (trigger) {\n        trigger.addEventListener(Events.CLICK, _this3._handleCloseClick);\n      });\n    }\n  }, {\n    key: \"_focusModalDialog\",\n    value: function _focusModalDialog() {\n      focusOnce(this._activeModal);\n    }\n  }, {\n    key: \"_getScrollbarOffset\",\n    value: function _getScrollbarOffset() {\n      return window.innerWidth - document.body.getBoundingClientRect().right;\n    }\n  }, {\n    key: \"_setScrollbarOffset\",\n    value: function _setScrollbarOffset() {\n      if (!this._scrollbarIsVisible()) return;\n      this._scrollbarOffset = this._getScrollbarOffset();\n      this._originalPagePadding = dom.getStyle(document.body, CssProperties.PADDING_RIGHT);\n      dom.setStyle(document.body, CssProperties.PADDING_RIGHT, \"\".concat(this._scrollbarOffset, \"px\"));\n    }\n  }, {\n    key: \"_scrollbarIsVisible\",\n    value: function _scrollbarIsVisible() {\n      if (typeof window.innerWidth === \"number\") {\n        return window.innerWidth > document.body.getBoundingClientRect().right;\n      }\n    }\n  }, {\n    key: \"_unsetScrollbarOffset\",\n    value: function _unsetScrollbarOffset() {\n      if (!this._activeModalOverlay) return;\n      var originalPaddingRight = this._originalPagePadding;\n\n      this._setPaddingOffsetTimeout();\n\n      dom.setStyle(document.body, CssProperties.PADDING_RIGHT, originalPaddingRight);\n    }\n  }, {\n    key: \"_setPaddingOffsetTimeout\",\n    value: function _setPaddingOffsetTimeout() {\n      var _this4 = this;\n\n      var DISMISS_SCROLLBAR_PADDING_DELAY = 500;\n      dom.setStyle(this._activeModalOverlay, CssProperties.PADDING_LEFT, \"\".concat(this._scrollbarOffset, \"px\"));\n      setTimeout(function () {\n        dom.setStyle(_this4._activeModalOverlay, CssProperties.PADDING_LEFT, \"\");\n        _this4._activeModalOverlay = null;\n        _this4._activeModalOverlayAttr = null;\n      }, DISMISS_SCROLLBAR_PADDING_DELAY);\n    }\n  }, {\n    key: \"_handleOverlayClick\",\n    value: function _handleOverlayClick(event) {\n      if (event.target === this._activeModalOverlay) {\n        this._handleCloseClick(event);\n      }\n    }\n  }, {\n    key: \"_handleEscapeKeyPress\",\n    value: function _handleEscapeKeyPress(event) {\n      if (event.which === KeyCodes.ESCAPE) {\n        this._handleCloseClick(event);\n      }\n    }\n  }, {\n    key: \"_focusModalTrigger\",\n    value: function _focusModalTrigger() {\n      focusOnce(this._activeModalTrigger);\n    }\n  }, {\n    key: \"_unsetScrollStop\",\n    value: function _unsetScrollStop() {\n      dom.removeClass(document.body, Selectors.NO_SCROLL);\n      dom.removeClass(document.documentElement, Selectors.NO_SCROLL);\n    }\n  }, {\n    key: \"_setScrollStop\",\n    value: function _setScrollStop() {\n      dom.addClass(document.body, Selectors.NO_SCROLL);\n      dom.addClass(document.documentElement, Selectors.NO_SCROLL);\n    }\n  }]);\n\n  return Modal;\n}();\n\nexport { Modal as default };\n//# sourceMappingURL=modal.js.map","export var KeyCodes = {\n  ESCAPE: 27\n};\nexport var Selectors = {\n  DATA_TOOLTIP: \"data-tooltip\",\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  ROLE: \"role\",\n  ARIA_DESCRIBEDBY: \"aria-describedby\",\n  DROP_INLINE_START_CLASS: \"is-drop-inline-start\",\n  DROP_INLINE_END_CLASS: \"is-drop-inline-end\"\n};\nexport var CssProperties = {\n  HEIGHT: \"height\",\n  WIDTH: \"width\",\n  CURSOR: \"cursor\",\n  TOP: \"top\",\n  LEFT: \"left\"\n};\nexport var CssValues = {\n  POINTER: \"pointer\",\n  AUTO: \"auto\"\n};\nexport var Events = {\n  CLICK: \"click\",\n  MOUSEOVER: \"mouseover\",\n  MOUSEOUT: \"mouseout\",\n  FOCUS: \"focus\",\n  BLUR: \"blur\",\n  KEYDOWN: \"keydown\"\n};\nexport var Messages = {\n  NO_ID_ERROR: \"Could not find tooltip id.\",\n  NO_TRIGGER_ERROR: function NO_TRIGGER_ERROR(id) {\n    return \"Could not find a tooltip trigger with attribute [data-target='\".concat(id, \"'].\");\n  },\n  NO_TOOLTIP_ERROR: function NO_TOOLTIP_ERROR(id) {\n    return \"Could not find a tooltip with id '\".concat(id, \"'.\");\n  }\n};\n//# sourceMappingURL=constants.js.map","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { iOSMobile, dom, isBrowserEnv, log, setComponents } from \"../helpers\";\nimport { KeyCodes, Selectors, CssProperties, CssValues, Events, Messages } from \"./constants\";\nvar COMPONENT_ROLE = \"tooltip\";\n\nvar Tooltip = function () {\n  function Tooltip() {\n    _classCallCheck(this, Tooltip);\n\n    this._handleEvent = this._handleEvent.bind(this);\n    this._handleClose = this._handleClose.bind(this);\n    this._handleEscapeKeyPress = this._handleEscapeKeyPress.bind(this);\n    this._setup = this._setup.bind(this);\n    this._teardown = this._teardown.bind(this);\n    this._tooltips = [];\n    this._scopes = new Map();\n    this._activeTrigger = null;\n    this._activeTooltip = null;\n  }\n\n  _createClass(Tooltip, [{\n    key: \"start\",\n    value: function start(scopeId) {\n      if (!isBrowserEnv) return;\n      setComponents({\n        thisArg: this,\n        scopeId: scopeId,\n        scopeKey: \"_scopes\",\n        componentAttribute: Selectors.DATA_TOOLTIP,\n        globalKey: \"_tooltips\",\n        errorMessage: Messages.NO_ID_ERROR\n      });\n\n      if (scopeId && this._scopes.has(scopeId)) {\n        this._scopes.get(scopeId).elements.forEach(this._setup);\n      } else if (this._tooltips.length) {\n        this._tooltips.forEach(this._setup);\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(scopeId) {\n      var _this = this;\n\n      if (!isBrowserEnv) return;\n\n      if (scopeId && this._scopes.has(scopeId)) {\n        var _this$_scopes$get = this._scopes.get(scopeId),\n            elements = _this$_scopes$get.elements;\n\n        elements.forEach(function (instance) {\n          var id = dom.getAttr(instance, Selectors.DATA_TOOLTIP);\n          var tooltip = dom.find(\"#\".concat(id));\n\n          if (!tooltip) {\n            log(Messages.NO_TOOLTIP_ERROR(id));\n            return;\n          }\n\n          if (dom.getAttr(tooltip, Selectors.DATA_VISIBLE) !== \"true\") return;\n\n          _this._handleClose();\n        });\n        elements.forEach(this._teardown);\n\n        this._scopes.delete(scopeId);\n      } else if (this._tooltips.length) {\n        if (this._activeTooltip) this._handleClose();\n\n        this._tooltips.forEach(this._teardown);\n\n        this._tooltips = [];\n      }\n    }\n  }, {\n    key: \"_setup\",\n    value: function _setup(instance) {\n      var tooltipId = dom.getAttr(instance, Selectors.DATA_TOOLTIP);\n\n      if (!tooltipId) {\n        log(Messages.NO_ID_ERROR);\n        return;\n      }\n\n      var trigger = dom.find(this._getTrigger(tooltipId), instance);\n      var tooltip = dom.find(\"#\".concat(tooltipId), instance);\n\n      if (!trigger) {\n        log(Messages.NO_TRIGGER_ERROR(tooltipId));\n        return;\n      }\n\n      if (!tooltip) {\n        log(Messages.NO_TOOLTIP_ERROR(tooltipId));\n        return;\n      }\n\n      dom.setAttr(trigger, Selectors.ARIA_DESCRIBEDBY, tooltipId);\n      dom.setAttr(tooltip, Selectors.ROLE, COMPONENT_ROLE);\n      trigger.addEventListener(Events.MOUSEOVER, this._handleEvent);\n      trigger.addEventListener(Events.FOCUS, this._handleEvent);\n    }\n  }, {\n    key: \"_teardown\",\n    value: function _teardown(instance) {\n      var id = dom.getAttr(instance, Selectors.DATA_TOOLTIP);\n      var trigger = dom.find(this._getTrigger(id), instance);\n      trigger.removeEventListener(Events.MOUSEOVER, this._handleEvent);\n      trigger.removeEventListener(Events.FOCUS, this._handleEvent);\n    }\n  }, {\n    key: \"_handleEvent\",\n    value: function _handleEvent(event) {\n      if (this._activeTooltip || this._activeTrigger) this._handleClose();\n      this._activeTrigger = event.target;\n\n      var tooltipId = this._activeTrigger.getAttribute(Selectors.DATA_TARGET);\n\n      this._activeTooltip = document.getElementById(tooltipId);\n\n      if (this._hasInlineClass()) {\n        this._alignTooltip(CssProperties.HEIGHT);\n      } else {\n        this._alignTooltip(CssProperties.WIDTH);\n      }\n\n      this._setVisibleState();\n\n      this._startCloseEvents();\n    }\n  }, {\n    key: \"_handleClose\",\n    value: function _handleClose() {\n      if (this._activeTooltip) this._setHideState();\n\n      this._startOpenEvents();\n\n      this._resetProperties();\n    }\n  }, {\n    key: \"_resetProperties\",\n    value: function _resetProperties() {\n      this._activeTrigger = null;\n      this._activeTooltip = null;\n    }\n  }, {\n    key: \"_setVisibleState\",\n    value: function _setVisibleState() {\n      dom.setAttr(this._activeTooltip, Selectors.DATA_VISIBLE, \"true\");\n    }\n  }, {\n    key: \"_setHideState\",\n    value: function _setHideState() {\n      dom.setAttr(this._activeTooltip, Selectors.DATA_VISIBLE, \"false\");\n    }\n  }, {\n    key: \"_startCloseEvents\",\n    value: function _startCloseEvents() {\n      this._activeTrigger.removeEventListener(Events.MOUSEOVER, this._handleEvent);\n\n      this._activeTrigger.removeEventListener(Events.FOCUS, this._handleEvent);\n\n      this._activeTrigger.addEventListener(Events.MOUSEOUT, this._handleClose);\n\n      this._activeTrigger.addEventListener(Events.BLUR, this._handleClose);\n\n      document.addEventListener(Events.KEYDOWN, this._handleEscapeKeyPress);\n      if (iOSMobile) dom.setStyle(document.body, CssProperties.CURSOR, CssValues.POINTER);\n    }\n  }, {\n    key: \"_handleEscapeKeyPress\",\n    value: function _handleEscapeKeyPress(event) {\n      if (event.which === KeyCodes.ESCAPE) {\n        this._handleClose();\n      }\n    }\n  }, {\n    key: \"_startOpenEvents\",\n    value: function _startOpenEvents() {\n      if (!this._activeTrigger) return;\n\n      this._activeTrigger.removeEventListener(Events.MOUSEOUT, this._handleClose);\n\n      this._activeTrigger.removeEventListener(Events.BLUR, this._handleClose);\n\n      this._activeTrigger.addEventListener(Events.MOUSEOVER, this._handleEvent);\n\n      this._activeTrigger.addEventListener(Events.FOCUS, this._handleEvent);\n\n      document.removeEventListener(Events.KEYDOWN, this._handleEscapeKeyPress);\n      if (iOSMobile) dom.setStyle(document.body, CssProperties.CURSOR, CssValues.AUTO);\n    }\n  }, {\n    key: \"_alignTooltip\",\n    value: function _alignTooltip(property) {\n      var triggerSize = this._getSize(this._activeTrigger, property);\n\n      var tooltipSize = this._getSize(this._activeTooltip, property);\n\n      var triggerIsBigger = triggerSize > tooltipSize;\n      var offset = triggerIsBigger ? (triggerSize - tooltipSize) / 2 : (tooltipSize - triggerSize) / -2;\n\n      if (property === CssProperties.HEIGHT) {\n        dom.setStyle(this._activeTooltip, CssProperties.TOP, \"\".concat(offset, \"px\"));\n      } else {\n        dom.setStyle(this._activeTooltip, CssProperties.LEFT, \"\".concat(offset, \"px\"));\n      }\n    }\n  }, {\n    key: \"_getTrigger\",\n    value: function _getTrigger(id) {\n      return \"[\".concat(Selectors.DATA_TARGET, \"=\\\"\").concat(id, \"\\\"]\");\n    }\n  }, {\n    key: \"_getSize\",\n    value: function _getSize(element, property) {\n      return Math.floor(element.getBoundingClientRect()[property]);\n    }\n  }, {\n    key: \"_hasInlineClass\",\n    value: function _hasInlineClass() {\n      return dom.hasClass(this._activeTooltip, Selectors.DROP_INLINE_START_CLASS, Selectors.DROP_INLINE_END_CLASS);\n    }\n  }]);\n\n  return Tooltip;\n}();\n\nexport { Tooltip as default };\n//# sourceMappingURL=tooltip.js.map","import _Collapsible from \"./collapsible\";\nimport _Accordion from \"./accordion\";\nimport _Dropdown from \"./dropdown\";\nimport _Modals from \"./modal\";\nimport _Tooltips from \"./tooltip\";\nimport { createFocusRing as _createFocusRing, createFocusTrap as _createFocusTrap } from \"./helpers\";\nexport var Collapsibles = new _Collapsible();\nexport var Accordions = new _Accordion();\nexport var Dropdowns = new _Dropdown();\nexport var Modals = new _Modals();\nexport var Tooltips = new _Tooltips();\nexport var createFocusRing = _createFocusRing;\nexport var createFocusTrap = _createFocusTrap;\nvar Undernet = {\n  Modals: Modals,\n  Collapsibles: Collapsibles,\n  Accordions: Accordions,\n  Dropdowns: Dropdowns,\n  Tooltips: Tooltips,\n  createFocusTrap: _createFocusTrap,\n  createFocusRing: _createFocusRing\n};\nvar focusRing = Undernet.createFocusRing();\n\nUndernet.start = function (scopeId) {\n  var enableFocusRing = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  Undernet.Modals.start(scopeId);\n  Undernet.Accordions.start(scopeId);\n  Undernet.Collapsibles.start(scopeId);\n  Undernet.Dropdowns.start(scopeId);\n  Undernet.Tooltips.start(scopeId);\n  if (enableFocusRing) focusRing.start();\n};\n\nUndernet.stop = function (scopeId) {\n  var enableFocusRing = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  Undernet.Modals.stop(scopeId);\n  Undernet.Accordions.stop(scopeId);\n  Undernet.Collapsibles.stop(scopeId);\n  Undernet.Dropdowns.stop(scopeId);\n  Undernet.Tooltips.stop(scopeId);\n  if (enableFocusRing) focusRing.stop();\n};\n\nexport default Undernet;\n//# sourceMappingURL=index.js.map","import Undernet from \"../lib/esm\"\n\ndocument.addEventListener(\"DOMContentLoaded\", () => Undernet.start())\n"],"names":["KeyCodes","Selectors","FOCUSABLE_TAGS","KEYBOARD_CLASS","NOT_VISUALLY_HIDDEN_CLASS","TABINDEX","Events","Messages","type","concat","id","log","message","arguments","length","undefined","console","isBrowserEnv","window","dom","element","attr","value","selector","parent","document","_toConsumableArray","property","_element$classList","_len","classes","Array","_key","classList","add","apply","_element$classList2","_len2","_key2","remove","_len3","_key3","filter","givenClassName","getFocusableElements","selectorString","matchers","focusables","map","join","iOSMobile","test","navigator","userAgent","createFocusTrap","options","useArrows","children","_options$matchers","hasBadMatcher","matcher","_typeof","focusableChildren","focusableFirstChild","focusableLastChild","handleFocusTrapWithTab","event","containerElement","containerActive","firstActive","lastActive","tabKey","shiftKey","noShift","focusNextChild","i","activeElement","focusLastChild","handleFocusTrapWithArrows","arrowUp","arrowDown","start","stop","focusOnce","handleBlur","_ref","target","filterByAttrValue","elements","attribute","error","assignScope","thisArg","scopeId","scopeKey","componentAttribute","globalKey","errorMessage","filterFn","scope","assignGlobal","scopes","size","component","componentId","Boolean","setComponents","CssProperties","Collapsible","_classCallCheck","this","_handleClick","bind","_setCollapsibles","_setup","_teardown","_collapsibles","_collapsibleTriggers","_collapsibleScopes","Map","_activeCollapsible","_activeTrigger","_activeContent","_activeCollapsibleId","_nextAriaExpandedState","_nextAriaHiddenState","_this","controlled","onClick","_handleClickFn","has","get","forEach","delete","metadata","collapsible","trigger","content","nextAriaExpandState","nextAriaHiddenState","collapsibleId","collapsibleInstance","triggerInstance","contentInstance","nextAriaExpandStateValue","nextAriaHiddenStateValue","_getFontSizeEm","instance","_this$_getCollapsible","_getCollapsibleData","collapsibleContentId","collapsibleContent","collapsibleContentFocusableChildren","push","_setIds","_setActiveCollapsible","_setActiveContent","_setNextVisibleState","toggleCollapsible","collapsibleTriggerTargetAttr","_getTargetAttr","_this2","currentVisibleState","pixels","body","computedFontSize","bodySize","indexOfPx","parseFloat","getPageBaseFontSize","triggersLength","collapsiblesLength","Accordion","_getPrototypeOf","call","_assertThisInitialized","_setFocusTraps","_accordions","_focusTraps","_accordionScopes","_activeAccordionId","_activeAccordion","_toggleMultipleEnabled","_get","prototype","_unsetFocusTraps","triggers","collapsibles","activeTrigger","_setActiveAccordionId","_setActiveAccordion","_setToggleMultiple","_closeAllCollapsibles","_this3","openCollapsibles","_isExpanded","DATA_DROPDOWN","DROPDOWN_MENU_CLASS","DATA_TARGET","DATA_PARENT","DATA_VISIBLE","ARIA_HASPOPUP","ARIA_CONTROLS","ARIA_LABELLEDBY","ARIA_EXPANDED","ROLE","CssValues","Dropdown","_handleFirstTabClose","_handleLastTabClose","_handleArrowKeyPress","_handleCloseClick","_handleEscapeKeyPress","_handleOffMenuClick","_dropdowns","_scopes","_activeDropdown","_activeDropdownTrigger","_activeDropdownMenu","_activeDropdownActions","_allowFocusReturn","_activeDropdownId","_activeDropdownAttr","_activeDropdownMenuId","_firstDropdownAction","_lastDropdownAction","_focusTrap","_dropdownContainerAttr","_dropdownTargetAttr","_dropdownMenuClassName","dropdown","_closeActiveDropdownMenu","dropdownId","dropdownAttr","dropdownTrigger","dropdownMenu","dropdownMenuItemsAttr","dropdownMenuListItems","item","dropdownMenuTriggers","_getDropdownActions","key","_closeOpenDropdowns","_setActiveDropdownId","_setActiveDropdown","_setActiveDropdownMenu","_setVisibleState","_startActiveDropdownEvents","focus","_handleReturnFocus","_closeActiveDropdown","removeEventListener","addEventListener","action","_resetProperties","containerSelector","which","Modal","_handleOverlayClick","_modals","_activeModalTrigger","_activeModalOverlayAttr","_activeModalOverlay","_activeModal","_activeModalId","_activeModalSelector","_activeModalCloseTriggers","_originalPagePadding","_scrollbarOffset","_closeActiveModal","modalId","modalWrapperAttr","modalWrapper","modal","_setActiveModalId","_setActiveModalOverlay","_setActiveModal","_setScrollbarOffset","_setScrollStop","_changeDialogVisibility","_changeTabindexOnChildren","_setCloseTriggers","_focusModalDialog","scrollTop","_startEvents","_focusModalTrigger","_unsetScrollStop","_unsetScrollbarOffset","isVisible","right","_scrollbarIsVisible","_getScrollbarOffset","innerWidth","originalPaddingRight","_setPaddingOffsetTimeout","_this4","setTimeout","Tooltip","_handleEvent","_handleClose","_tooltips","_activeTooltip","tooltip","tooltipId","_getTrigger","getAttribute","_hasInlineClass","_alignTooltip","_startCloseEvents","_setHideState","_startOpenEvents","triggerSize","_getSize","tooltipSize","offset","Math","Collapsibles","_Collapsible","Accordions","_Accordion","Dropdowns","_Dropdown","Undernet","Modals","_Modals","Tooltips","_Tooltips","_createFocusTrap","createFocusRing","listeningForKeydown","listenForKeyboard","listenForClick","focusRing","enableFocusRing"],"mappings":"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"}